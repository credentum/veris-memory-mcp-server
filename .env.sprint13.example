# =============================================================================
# Veris Memory MCP Server - Sprint 13 Configuration Example
# =============================================================================
# Copy this file to .env and update with your values
#
# IMPORTANT: Never commit .env files with real API keys to git!
# =============================================================================

# =============================================================================
# Veris Memory Backend Connection
# =============================================================================

# API URL for Veris Memory backend (Sprint 13)
VERIS_MEMORY_API_URL=http://localhost:8000

# API Key for authentication (Sprint 13 required)
# Format: vmk_{prefix}_{random}:user_id:role:is_agent
# Roles: admin, writer, reader, guest
# is_agent: true (AI agent) or false (human user)
#
# Development (default test key - only works with ENVIRONMENT=development):
VERIS_MEMORY_API_KEY=vmk_test_a1b2c3d4e5f6789012345678901234567890
#
# Production (generate secure key):
# VERIS_MEMORY_API_KEY=vmk_writer_$(openssl rand -hex 16):mcp_server:writer:true

# User ID for scoped operations (optional)
VERIS_MEMORY_USER_ID=mcp_dev_user

# =============================================================================
# MCP Server Configuration
# =============================================================================

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
VERIS_MCP_LOG_LEVEL=INFO

# Configuration file path (optional, for advanced configuration)
# VERIS_MCP_CONFIG_PATH=/path/to/config.json

# =============================================================================
# Sprint 13 API Key Examples
# =============================================================================
# Choose the appropriate role and is_agent flag for your use case:

# Writer Key (AI Agent - Recommended for MCP Server)
# - Can create and read contexts
# - Can use forget_context (soft delete)
# - Cannot use delete_context (human-only operation)
# VERIS_MEMORY_API_KEY=vmk_writer_a1b2c3d4e5f6789012345678:mcp_server:writer:true

# Admin Key (Human User - For administrative operations)
# - Full access including hard delete
# VERIS_MEMORY_API_KEY=vmk_admin_a1b2c3d4e5f6789012345678:admin_user:admin:false

# Reader Key (Read-Only Access)
# - Can only retrieve and search contexts
# VERIS_MEMORY_API_KEY=vmk_reader_a1b2c3d4e5f6789012345678:read_user:reader:false

# =============================================================================
# Security Notes
# =============================================================================
# 1. NEVER commit real API keys to git
# 2. Use .env.local (gitignored) for actual keys
# 3. Generate secure keys: openssl rand -hex 32
# 4. Rotate API keys every 90 days
# 5. Use unique API keys per MCP server instance
# 6. Set is_agent=true for AI agents to prevent accidental hard deletes
#
# For systemd deployment:
# 1. Create secure credential file: /opt/mcp-server/credentials/api_key
# 2. Set restrictive permissions: chmod 600 /opt/mcp-server/credentials/api_key
# 3. API key will be available as $CREDENTIALS_DIRECTORY/api_key in the service

# =============================================================================
# Generating Secure API Keys
# =============================================================================
# Generate a secure random key suffix:
#   openssl rand -hex 16
#
# Example output:
#   a1b2c3d4e5f6789012345678901234567890
#
# Use in API key:
#   vmk_writer_a1b2c3d4e5f6789012345678901234567890:mcp_server:writer:true
#
# Add to Veris Memory backend .env:
#   API_KEY_MCP=vmk_writer_a1b2c3d4e5f6789012345678901234567890:mcp_server:writer:true
#   AUTH_REQUIRED=true
#   ENVIRONMENT=production
